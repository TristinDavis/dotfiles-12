#!/usr/bin/env sh
# Output a succinct view of Pulseaudio in/out volume

sink=$(pacmd stat | awk -F': ' '/Default sink/ { print $2 }')
sour=$(pacmd stat | awk -F': ' '/Default source/ { print $2 }')

pactl list sinks | awk -v sink="$sink" '
    $0 ~ sink { found=1 }
    !found { next }
    /Mute: / && $2 ~ "yes" { muted="!" }
    /\tVolume: / {
        printf("V: %s%s", $5, muted)
    }
'

printf ' '

pactl list sources | awk -v sink="$sour" '
    $0 ~ sink { found=1 }
    !found { next }
    /Mute: / && $2 ~ "yes" { muted="!" }
    /\tVolume: / {
        printf("M: %s%s", $5, muted)
    }
'
